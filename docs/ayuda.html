<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gu√≠a de uso ¬∑ TestMania</title>
  <meta name="description"
    content="Gu√≠a de uso de TestMania: crear tests con IA, exportar a PDF/JSON, acciones de la tabla, cron√≥metro, progreso, privacidad y preguntas frecuentes." />
  <link rel="stylesheet" href="./Cuestionarios.css" />
  <link rel="stylesheet" href="./ayuda.css" />
</head>

<body>
  <div id="root">
    <div class="cuestionario">
      <header class="app-header">
        <nav style="margin-left: auto; display: flex; gap: 8px;"><a href="/" class="nota-link">Inicio</a><a
            href="/catalogo" class="nota-link">Cat√°logo</a></nav>
      </header>
      <header class="app-header">
        <a href="./" class="logo-wrap" aria-label="Volver a TestMania">
          <span class="logo-icon" aria-hidden="true">
            <span class="logo-check">L</span>
          </span>
          <span class="logo-text">TestMan<span class="logo-ia">ia</span>.es</span>
        </a>
      </header>

      <h2 style="max-width:1000px;margin:0 auto;padding:0 12px 8px;">Gu√≠a de uso</h2>

      <main class="help-layout">
        <!-- Navegaci√≥n/√çndice -->
        <aside class="help-aside" aria-label="√çndice de contenidos">
          <nav>
            <ol>
              <li><a href="#que-es">¬øQu√© es TestMania?</a></li>
              <li><a href="#por-que">¬øPor qu√© te gustar√° TestMania?</a></li>
              <li><a href="#crear-con-ia">Crear un test con IA</a></li>
              <li><a href="#formato-json">Formato del JSON</a></li>
              <li><a href="#tabla-y-acciones">Tabla de tests y acciones</a></li>
              <li><a href="#exportar-pdf">Exportar a PDF</a></li>
              <li><a href="#catalogo-tests">Cat√°logo de tests</a></li>
              <li><a href="#compartir">Compartir tests</a></li>
              <li><a href="#interfaz-test">Interfaz durante un test</a></li>
              <li><a href="#donde-se-guardan">¬øD√≥nde se guardan mis tests?</a></li>
              <li><a href="#preguntas-frecuentes">Preguntas frecuentes</a></li>
              <li><a href="#privacidad">Privacidad</a></li>
            </ol>
          </nav>
        </aside>

        <!-- Contenido principal -->
        <article class="help-article">
          <section id="que-es" aria-labelledby="h-que-es">
            <h2 id="h-que-es">¬øQu√© es TestMania?</h2>
            <p>TestMania te permite <strong>crear y resolver tests</strong> sobre cualquier tema de forma muy sencilla.
              Puedes generar preguntas con tu IA favorita y tener tus test organizados en una tabla con progreso, tiempo
              y acciones r√°pidas.</p>
          </section>

          <section id="por-que" aria-labelledby="h-por-que">
            <h2 id="h-por-que">¬øPor qu√© te gustar√° TestMania?</h2>
            <ul>
              <li><strong>Ultra-r√°pido:</strong> genera tests con tu IA favorita y p√©galos en JSON.</li>
              <li><strong>Experiencia de estudio:</strong> cron√≥metro, progreso con aciertos/fallos y feedback
                inmediato.
              </li>
              <li><strong>Tu contenido es tuyo:</strong> todo se guarda en tu navegador (localStorage), sin servidores.
              </li>
              <li><strong>Exportaci√≥n f√°cil:</strong> PDF listo para imprimir y JSON para compartir o versionar.</li>
              <li><strong>Cat√°logo ampliable:</strong> a√±ade tests de ejemplo desde un √≠ndice externo.</li>
            </ul>
          </section>

          <section id="crear-con-ia" aria-labelledby="h-crear-ia">
            <h2 id="h-crear-ia">Crear un test con IA</h2>
            <ol>
              <li>En la secci√≥n <strong>Crea tu test</strong>, escribe la <u>tem√°tica</u> y el n√∫mero de preguntas.</li>
              <li>Selecciona una <u>plataforma de IA</u> en el desplegable: ChatGPT, DeepSeek, Copilot, Gemini, Grok,
                Perplexity, Mistral o Claude.</li>
              <li>Pulsa <strong>Abrir IA</strong>. Se abrir√° en una nueva pesta√±a y el <em>prompt</em> se
                <strong>copiar√°
                  autom√°ticamente</strong> al portapapeles.
              </li>
              <li>Pega (<kbd>Ctrl</kbd>+<kbd>V</kbd>) ese texto en la IA y espera la respuesta.</li>
              <li>Copia todo el <strong>c√≥digo JSON</strong> generado y p√©galo en el cuadro <em>¬´C√≥digo del test
                  (JSON)¬ª</em>.</li>
              <li>Pulsa <strong>Crear Test</strong>. Si el t√≠tulo ya existe, se renombrar√° autom√°ticamente (ej.: <em>¬´Mi
                  test (2)¬ª</em>).</li>
            </ol>
            <aside role="note">
              Consejo: la tem√°tica puede ser general o muy espec√≠fica (ej.: capitales de √Åfrica, discos de los Beatles,
              reglamento de f√∫tbol‚Ä¶).
            </aside>
          </section>


          </section>

          <section id="formato-json" aria-labelledby="h-formato-json">
            <h2 id="h-formato-json">Formato del JSON</h2>
            <p>Cada test se define con un objeto JSON que debe cumplir estas reglas:</p>

            <ul>
              <li><code>titulo</code>: nombre del test (texto corto y representativo).</li>
              <li><code>preguntas</code>: lista de objetos, uno por cada pregunta.</li>
              <li>Cada pregunta incluye:
                <ul>
                  <li><code>texto</code>: enunciado de la pregunta.</li>
                  <li><code>opciones</code>: <strong>exactamente 4 respuestas</strong> posibles.</li>
                  <li><code>correcta</code>: n√∫mero de la opci√≥n correcta (1, 2, 3 o 4).</li>
                </ul>
              </li>
            </ul>

            <details>
              <summary>Ejemplo v√°lido</summary>
              <pre><code>{
   "titulo":"Cultura general",
   "preguntas":[
      {
         "texto":"¬øCapital de Francia?",
         "opciones":[
            "Madrid",
            "Roma",
            "Lisboa",
            "Par√≠s"
         ],
         "correcta":4
      },
      {
         "texto":"¬øAutor de Don Quijote?",
         "opciones":[
            "Cervantes",
            "Lope",
            "Quevedo",
            "G√≥ngora"
         ],
         "correcta":1
      }
   ]
}</code></pre>
            </details>

            <details>
              <summary>Ejemplo con errores frecuentes</summary>
              <pre><code>{
   "titulo":"Test mal formado",
   "preguntas":[
      {
         "texto":"¬øCapital de Italia?",
         "opciones":[
            "Roma",
            "Mil√°n",
            "N√°poles"
         ],// ‚ùå Solo 3 opciones
         "correcta":0 // ‚ùå Debe empezar en 1, no en 0
      }
   ]
}</code></pre>
            </details>

            <aside role="note">
              ‚úîÔ∏è Recomendaciones:
              <ul>
                <li>Siempre usa 4 opciones.</li>
                <li>No pongas texto adicional fuera del JSON.</li>
                <li>El n√∫mero de la opci√≥n correcta empieza en <strong>1</strong> (no en 0).</li>
              </ul>
            </aside>
          </section>


          <section id="tabla-y-acciones" aria-labelledby="h-tabla">
            <h2 id="h-tabla">Tabla de tests y acciones</h2>
            <p>En la tabla ver√°s cada test con aciertos, progreso, tiempo invertido y un <strong>men√∫ de
                acciones</strong>
              por fila:</p>
            <ul>
              <li><strong>Exportar Test a PDF</strong> ‚Äî genera un PDF listo para imprimir.</li>
              <li><strong>Descargar JSON del Test</strong> ‚Äî guarda el test como archivo <code>.json</code>.</li>
              <li><strong>Copiar JSON del Test</strong> ‚Äî lo copia al portapapeles.</li>
              <li><strong>Reiniciar Test</strong> ‚Äî borra respuestas y tiempo de ese test.</li>
              <li><strong>Desordenar Test</strong> ‚Äî mezcla preguntas y opciones.</li>
              <li><strong>Restaurar orden del Test</strong> ‚Äî devuelve el orden original.</li>
              <li><strong>Eliminar Test</strong> ‚Äî disponible solo para tests creados por ti.</li>
            </ul>
          </section>

          <section id="exportar-pdf" aria-labelledby="h-exportar-pdf">
            <h2 id="h-exportar-pdf">Exportar a PDF</h2>
            <p>La exportaci√≥n crea un documento con:</p>
            <ul>
              <li><strong>T√≠tulo</strong> del test.</li>
              <li>Cada <strong>pregunta</strong> y sus 4 opciones (con saltos de l√≠nea autom√°ticos).</li>
              <li><strong>Respuestas correctas</strong> al final (n√∫mero, letra y texto).</li>
            </ul>
            <p>El archivo se descarga con el nombre del test y extensi√≥n <code>.pdf</code>.</p>
          </section>

          <section id="catalogo-tests" aria-labelledby="h-catalogo-tests">
            <h2 id="h-catalogo-tests">Cat√°logo de tests</h2>
            <p>El cat√°logo muestra una lista externa de cuestionarios listos para a√±adir a tu tabla.</p>
            <ol>
              <li>Abre el <strong>Cat√°logo</strong> desde la p√°gina principal (bot√≥n/ enlace) o visita
                <code>/catalogo</code>.
              </li>
              <li>Explora la lista (puede incluir <em>tags</em> o filtros por texto si est√°n disponibles).</li>
              <li>Selecciona uno o varios tests y pulsa <strong>A√±adir seleccionados</strong>.</li>
              <li>Volver√°s a la p√°gina principal y ver√°s los tests a√±adidos en tu tabla.</li>
            </ol>
            <aside role="note">
              Si un t√≠tulo ya existe en tu tabla, se renombrar√° autom√°ticamente (ej.: <em>¬´Historia universal
                (2)¬ª</em>).
            </aside>
            <p>Puedes quitar cualquier test de tu tabla cuando quieras; esto no afecta al cat√°logo.</p>
          </section>

          <section id="compartir" aria-labelledby="h-compartir">
            <h2 id="h-compartir">Compartir tests</h2>
            <ul>
              <li><strong>Exportar a JSON:</strong> en el men√∫ de acciones, elige ¬´Descargar JSON del Test¬ª y env√≠a el
                archivo.</li>
              <li><strong>Copiar JSON:</strong> ¬´Copiar JSON del Test¬ª y pega el contenido donde quieras (chat, email,
                etc.).</li>
            </ul>
            <aside role="note">
              Recuerda: los tests y resultados <strong>no se suben a ning√∫n servidor</strong>. Solo compartes lo que
              exportas o copias.
            </aside>
          </section>

          <section id="interfaz-test" aria-labelledby="h-interfaz">
            <h2 id="h-interfaz">Interfaz durante un test</h2>
            <ul>
              <li><strong>Cron√≥metro ‚è≥</strong> ‚Äî mide el tiempo invertido.</li>
              <li><strong>Aciertos üéØ</strong> ‚Äî contador de respuestas correctas sobre el total.</li>
              <li><strong>Barra de progreso</strong> ‚Äî muestra porcentaje de aciertos, fallos y pendientes.</li>
              <li><strong>Men√∫ de acciones</strong> y bot√≥n <em>Volver</em> en la cabecera.</li>
              <li><strong>Mensajes inmediatos</strong> tras responder: ‚úÖ correcta / ‚ùå incorrecta.</li>
            </ul>
          </section>

          <section id="donde-se-guardan" aria-labelledby="h-donde-se-guardan">
            <h2 id="h-donde-se-guardan">¬øD√≥nde se guardan mis tests?</h2>
            <p>Tus tests y respuestas se guardan <strong>√∫nicamente en tu navegador</strong> (localStorage).</p>
            <ul>
              <li>Si borras los datos del navegador, usas otro navegador o cambias de dispositivo, no aparecer√°n
                autom√°ticamente.</li>
              <li>Haz copia exportando a <code>.json</code> para recuperarlos despu√©s.</li>
            </ul>
          </section>

          <section id="preguntas-frecuentes" aria-labelledby="h-faq">
            <h2 id="h-faq">Preguntas frecuentes</h2>
            <details>
              <summary>¬øPuedo crear un test sin JSON?</summary>
              <p>De momento se crea con JSON. Se estudia a√±adir asistentes visuales.</p>
            </details>
            <details>
              <summary>¬øQu√© pasa si ya existe un test con el mismo t√≠tulo?</summary>
              <p>La app lo renombra autom√°ticamente (ej.: <em>¬´Mi test (2)¬ª</em>).</p>
            </details>
            <details>
              <summary>¬øC√≥mo importo un test exportado?</summary>
              <p>Pega el contenido del archivo <code>.json</code> en el cuadro de creaci√≥n y pulsa <strong>Crear
                  Test</strong>.</p>
            </details>
            <details>
              <summary>¬øSe comparten mis tests?</summary>
              <p>No. Se quedan en tu navegador salvo que los exportes y compartas.</p>
            </details>
          </section>

          <section id="privacidad" aria-labelledby="h-privacidad">
            <h2 id="h-privacidad">Privacidad</h2>
            <p>TestMania no env√≠a tus tests a ning√∫n servidor. Todo se mantiene local salvo que decidas exportarlo.</p>
          </section>

        </article>
      </main>

      <footer>
        <p><a href="./">Volver a TestMania</a> ¬∑ ¬© <span id="year">2025</span></p>
        <script>
          document.getElementById('year').textContent = new Date().getFullYear();
        </script>
      </footer>
      <script>
        function analizarLocalStorageCompleto() {
          let totalBytes = 0;
          const items = [];

          console.log("=== AN√ÅLISIS DETALLADO DEL LOCALSTORAGE ===");

          // An√°lisis detallado de cada item
          for (let i = 0; i < localStorage.length; i++) {
            const clave = localStorage.key(i);
            const valor = localStorage.getItem(clave);
            const tama√±oItem = (clave.length + valor.length) * 2;
            totalBytes += tama√±oItem;

            items.push({
              clave: clave,
              tama√±oBytes: tama√±oItem,
              tama√±oKB: tama√±oItem / 1024
            });

            console.log(`üîë ${clave}: ${tama√±oItem} bytes (${(tama√±oItem / 1024).toFixed(2)} KB)`);
          }

          // C√°lculos de tama√±o
          const kb = totalBytes / 1024;
          const mb = kb / 1024;
          const limiteEstimado = 5 * 1024 * 1024; // 5 MB aproximado
          const porcentajeUsado = (totalBytes / limiteEstimado) * 100;

          console.log("\n=== RESUMEN ===");
          console.log(`üìä Total items: ${localStorage.length}`);
          console.log(`üíæ Espacio total: ${totalBytes} bytes`);
          console.log(`üíæ Espacio total: ${kb.toFixed(2)} KB`);
          console.log(`üíæ Espacio total: ${mb.toFixed(4)} MB`);
          console.log(`üìà L√≠mite aproximado: 5-10 MB (depende del navegador)`);

          console.log("\n=== ESTADO DEL ALMACENAMIENTO ===");
          console.log(`üîÑ Porcentaje usado: ${porcentajeUsado.toFixed(2)}%`);

          // Verificaci√≥n de l√≠mites
          if (totalBytes > limiteEstimado * 0.9) {
            console.warn("üö® ‚ö†Ô∏è  PELIGRO: LocalStorage cerca del l√≠mite m√°ximo");
          } else if (totalBytes > limiteEstimado * 0.7) {
            console.warn("‚ö†Ô∏è  Advertencia: LocalStorage en m√°s del 70% de capacidad");
          } else if (totalBytes > limiteEstimado * 0.5) {
            console.log("‚ÑπÔ∏è  Info: LocalStorage en m√°s del 50% de capacidad");
          } else {
            console.log("‚úÖ LocalStorage en buen estado de capacidad");
          }

          // Encontrar items grandes (>10KB)
          console.log("\n=== ITEMS GRANDES (>10 KB) ===");
          const itemsGrandes = items.filter(item => item.tama√±oKB > 10);
          if (itemsGrandes.length > 0) {
            itemsGrandes.forEach(item => {
              console.log(`üö® ${item.clave}: ${item.tama√±oKB.toFixed(2)} KB`);
            });
          } else {
            console.log("‚úÖ No hay items que excedan 10 KB");
          }

          // Devolver objeto con toda la informaci√≥n para uso program√°tico
          return {
            totalBytes: totalBytes,
            totalKB: kb,
            totalMB: mb,
            totalItems: localStorage.length,
            porcentajeUsado: porcentajeUsado,
            items: items,
            itemsGrandes: itemsGrandes,
            estado: totalBytes > limiteEstimado * 0.9 ? "peligro" :
              totalBytes > limiteEstimado * 0.7 ? "advertencia" :
                totalBytes > limiteEstimado * 0.5 ? "info" : "ok"
          };
        }

        // Ejecutar la funci√≥n
        const resultado = analizarLocalStorageCompleto();
      </script>
    </div>
  </div>
</body>

</html>